
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://soniacq.github.io/openspace-webrtc/01-architecture/system-architecture/">
      
      
        <link rel="prev" href="../../00-introduction/related-repositories/">
      
      
        <link rel="next" href="../../02-deployment-options/overview/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>System Architecture - OpenSpace WebRTC Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OpenSpace WebRTC Docs" class="md-header__button md-logo" aria-label="OpenSpace WebRTC Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OpenSpace WebRTC Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              System Architecture
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OpenSpace WebRTC Docs" class="md-nav__button md-logo" aria-label="OpenSpace WebRTC Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    OpenSpace WebRTC Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Introduction
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Introduction
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-introduction/what-is-openspace-webrtc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    What is OpenSpace WebRTC?
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../00-introduction/related-repositories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Related Repositories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Architecture
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Architecture
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    System Architecture
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Components
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-initialization-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Session Initialization Sequence
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuous-operation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Continuous Operation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-network-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security and Network Endpoints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security and Network Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-note" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ports
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secure-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secure Endpoints
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unsecure-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unsecure Endpoints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment Options
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment Options
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-deployment-options/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-deployment-options/local-single-machine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Local Single-Machine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-deployment-options/cloud-aws-ec2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cloud (AWS EC2)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    AWS Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    AWS Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-aws-deployment/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-aws-deployment/cost-and-scaling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cost & Scaling
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-aws-deployment/instance-requirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Instance Requirements
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-aws-deployment/ec2-deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EC2 Deployment
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../appendix" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Appendix
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#components" class="md-nav__link">
    <span class="md-ellipsis">
      
        Components
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        API Overview
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#session-initialization-sequence" class="md-nav__link">
    <span class="md-ellipsis">
      
        Session Initialization Sequence
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#continuous-operation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Continuous Operation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-network-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security and Network Endpoints
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Security and Network Endpoints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-note" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ports" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ports
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#secure-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Secure Endpoints
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unsecure-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unsecure Endpoints
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="system-architecture">System Architecture</h1>
<p>This document describes the architecture of OpenSpace WebRTC, including the main components, API commands, session flow, and network endpoints.</p>
<hr />
<h2 id="components">Components</h2>
<p>OpenSpace WebRTC consists of four main components:</p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Role</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rendering Server</td>
<td>Runs OpenSpace instances, streams video over WebRTC, accepts API commands</td>
</tr>
<tr>
<td>Streaming Backend Server (SB Server)</td>
<td>Orchestrates OpenSpace instances, sends commands to rendering servers</td>
</tr>
<tr>
<td>Streaming Frontend Server (SF Server)</td>
<td>Serves Web GUI to clients, handles session requests</td>
</tr>
<tr>
<td>Client Browser</td>
<td>Displays streamed OpenSpace session, sends user interactions to rendering server</td>
</tr>
</tbody>
</table>
<p><img alt="OpenSpace WebRTC Architecture Overview" src="../images/openspace_webrtc-architecture_unsecure.png" /></p>
<hr />
<h2 id="api-overview">API Overview</h2>
<p>Communication between the SB Server and rendering servers uses JSON messages. All responses include an <code>error</code> field.   If the error is not <code>none</code>, then  its value should be read and the error condition handled before interpreting the rest of the message.</p>
<table>
<thead>
<tr>
<th>Message</th>
<th>Description</th>
<th>Response from rendering server</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>{ "command": "START" }</code></td>
<td>Start an OpenSpace rendering streaming session.</td>
<td><code>{ "command": "START", "error": "none", "id": id }</code><br>Returns an id integer for the session. A value of -1 signifies an unsuccessful start. The id value starts at zero.<br>If <code>"error"</code> is <code>"none"</code> then the session started successfully. This may also return <code>"no available slots"</code>.</td>
</tr>
<tr>
<td><code>{ "command": "STOP", "id": id }</code></td>
<td>Stop the OpenSpace rendering streaming session specified by the integer session id.</td>
<td><code>{ "command": "STOP", "error": "none", "id": id }</code><br>Returns the id number of the session to be stopped. A value of -1 signifies an unsuccessful stop.<br>If <code>"error"</code> is <code>"none"</code> then the session was stopped successfully. This may also return <code>"not running"</code>.</td>
</tr>
<tr>
<td><code>{ "command": "RESOLUTION", "id": id, "width": width_pixels, "height": height_pixels }</code></td>
<td>Set the resolution of the instance id to render in resolution of width x height (in pixel integers). This also works while OpenSpace is running.</td>
<td><code>{ "command": "RESOLUTION", "error": "none", "id": id, "width": width_pixels, "height": height_pixels }</code></td>
</tr>
<tr>
<td><code>{ "command": "STATUS", "id": id }</code></td>
<td>Request for status of the OpenSpace rendering session specified by the integer id.</td>
<td><code>{ "command": "STATUS", "error": "none", "id": 0, "status": status }</code><br>Where <code>status</code> is one of: <code>"IDLE"</code>, <code>"INITIALIZING"</code>, <code>"RUNNING"</code>, <code>"DEINITIALIZING"</code>, <code>"INVALID"</code>.<br>If <code>"error"</code> is <code>"none"</code> then the returned status can be considered valid. This may also return <code>"invalid id"</code>.</td>
</tr>
<tr>
<td><code>{ "command": "SERVER_STATUS" }</code></td>
<td>Requests general status of the rendering server</td>
<td>Example return message:<br><code>{ "command": "SERVER_STATUS", "error": "none", "id": 0, "running": 1, "total": 3 }</code><br>In this example, there is currently 1 running instance, out of a possible 3 instances that the server can simultaneously support.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="session-initialization-sequence">Session Initialization Sequence</h2>
<p><strong>Starting a Rendering Server:</strong> A rendering server is intended to run continuously in order to provide access whenever requested. To start a server for the first time, run the python supervisor. This will do the following:
- Start a signaling server which will handle all sessions between any of the running OpenSpace instances on its own server and their corresponding client.
- Start a WebGUI frontend served by node.js. Any of the clients connecting to OpenSpace instances will connect to this at port 4690 in order to obtain their copy of the WebGUI to run on their browser.
- Establish a websocket connection on port 8765 to listen for commands from the Streaming Backend Server (SB Server). The supervisor does not initiate any communications; it only responds to commands from the SB Server.</p>
<p>The table below describes the typical sequence of events when a user starts an OpenSpace WebRTC session. It shows the interactions between the client browser, streaming frontend server (SF Server), streaming backend server (SB Server), and rendering server.</p>
<table>
<thead>
<tr>
<th>Client Browser</th>
<th>Streaming Frontend Server (SF Server)</th>
<th>Streaming Backend Server (SB Server)</th>
<th>Rendering Server</th>
</tr>
</thead>
<tbody>
<tr>
<td>User browses to the streaming frontend web page and requests a session</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>Displays initial page</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Receives session request from SF Server</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Sends <code>SERVER_STATUS</code> command to each server</td>
<td>Each rendering server responds with the number of busy sessions | available sessions</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Selects a rendering server for this session</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Sends <code>START</code> command to the supervisor</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>Receives <code>START</code> command</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>Starts instance of OpenSpace with the lowest-available ID (0 in this example) | Responds -1 if no slot available</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>OpenSpace registers itself with the signaling server using ID 0</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>Sends 0 response to SB Server</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Receives 0 from supervisor</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Begins polling every 5 seconds with <code>STATUS 0</code> command</td>
<td>Responds with <code>INITIALIZING</code> until complete | then <code>RUNNING</code></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Sends "start" message to SF Server</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Shows a "waiting for initialization" page</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>OpenSpace instance completes initialization</td>
</tr>
<tr>
<td></td>
<td></td>
<td>STATUS 0 polling receives <code>RUNNING</code> status</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Sends "running" message to SF Server | including session URL</td>
<td></td>
</tr>
<tr>
<td></td>
<td>Receives “running” message with session URL:<br><code>openspaceweb.sci.utah.edu:</code><br><code>4690/frontend/#/streaming?id=0</code> Where the URL parameter <code>id</code> contains the OpenSpace session ID</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>Switches from "waiting" message to browser frame using new URL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Browser gets the Web GUI from rendering server using the new URL</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Establishes an API websocket connection with OpenSpace 0 (port = 4682 + ID)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>User clicks "Join session" (automatic in future versions)</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Establishes a WebRTC connection with rendering server</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Web GUI instance registers itself with signaling server</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Web GUI instance requests a streaming session with OpenSpace 0</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>Signaling server tells OpenSpace 0 to start streaming</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td>OpenSpace 0 starts sending video frames over WebRTC to client</td>
</tr>
<tr>
<td>Continuously receives the stream of video frames</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="continuous-operation">Continuous Operation</h2>
<p>Once the session is running:</p>
<ul>
<li>User interactions (menu, camera control) are sent via the API websocket to the rendering server.</li>
<li>OpenSpace continuously streams video frames over WebRTC.</li>
<li>SB Server manages session lifecycle, including session timeouts and manual termination.</li>
</ul>
<hr />
<h2 id="security-and-network-endpoints">Security and Network Endpoints</h2>
<h3 id="security-note">Security Note</h3>
<p>Storing server IP addresses, port numbers, and instance IDs in the client browser’s <code>localStorage</code> poses a security risk. Future improvements will secure session information and API endpoints.</p>
<hr />
<h3 id="ports">Ports</h3>
<table>
<thead>
<tr>
<th>Component</th>
<th>Default Port</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Web GUI</td>
<td>4690</td>
<td>Client interface served by node.js</td>
</tr>
<tr>
<td>OpenSpace instances</td>
<td>4682, 4683, 4684…</td>
<td>API websocket per instance</td>
</tr>
<tr>
<td>Signaling server</td>
<td>8443</td>
<td>Handles WebRTC signaling</td>
</tr>
<tr>
<td>Proxy server</td>
<td>8080</td>
<td>Reverse proxy for secure connections</td>
</tr>
<tr>
<td>Supervisor</td>
<td>4699</td>
<td>Manages processes, Web GUI, and signaling server</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="secure-endpoints">Secure Endpoints</h3>
<table>
<thead>
<tr>
<th>Client URL / WebSocket</th>
<th>Local Mapping</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>https://openspaceweb.com/frontend/#/streaming?id=0</code></td>
<td><code>http://localhost:4690/frontend/#/streaming?id=0</code></td>
<td>Web GUI</td>
</tr>
<tr>
<td><code>wss://openspaceweb.com/ws</code></td>
<td><code>localhost:8080/ws</code> → <code>ws://openspaceweb.com/ws</code></td>
<td>Session signaling</td>
</tr>
<tr>
<td><code>wss://openspaceweb.com/4682</code></td>
<td><code>localhost:8080/4682</code> → <code>ws://openspaceweb.com:4682</code></td>
<td>OpenSpace instance API websocket</td>
</tr>
<tr>
<td><code>wss://openspaceweb.com/8443</code></td>
<td><code>localhost:8080/8443</code> → <code>ws://openspaceweb.com:8443</code></td>
<td>Signaling server</td>
</tr>
</tbody>
</table>
<p><img alt="OpenSpace WebRTC Architecture Overview" src="../images/openspace_webrtc-architecture_secure.png" /></p>
<hr />
<h3 id="unsecure-endpoints">Unsecure Endpoints</h3>
<table>
<thead>
<tr>
<th>Client URL / WebSocket</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>http://52.54.32.162:4690/frontend/#/streaming?id=0</code></td>
<td>Web GUI</td>
</tr>
<tr>
<td><code>ws://openspaceweb.com/ws</code></td>
<td>Session signaling</td>
</tr>
<tr>
<td><code>ws://openspaceweb.com/4682</code></td>
<td>OpenSpace instance API websocket</td>
</tr>
<tr>
<td><code>ws://openspaceweb.com:8443</code></td>
<td>Signaling server</td>
</tr>
</tbody>
</table>
<p><img alt="OpenSpace WebRTC Architecture Overview" src="../images/openspace_webrtc-architecture_unsecure.png" /></p>
<p><strong>Note:</strong> Storing server IP addresses, port numbers, and instance IDs in the client browser’s <code>localStorage</code> poses a security risk. This should be mitigated in future security improvements.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>